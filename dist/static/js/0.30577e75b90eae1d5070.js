webpackJsonp([0],{1016:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"crumbs"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[r("i",{staticClass:"el-icon-message"}),e._v(" 景区管理设置")]),e._v(" "),r("el-breadcrumb-item",[e._v("新增")])],1)],1),e._v(" "),r("div",{staticClass:"form-box"},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"90px"}},[r("el-form-item",{attrs:{label:"景区名称",prop:"name",rules:[{required:!0,message:"景区名称不能为空"}]}},[r("el-input",{model:{value:e.form.name,callback:function(t){e.form.name=t},expression:"form.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"景区位置"}},[r("div",{staticClass:"map"},[r("div",[r("b",[e._v("经度：")]),e._v(e._s(e.dragData.lng)+"\n                        "),r("b",[e._v("纬度：")]),e._v(e._s(e.dragData.lat)+"\n                        "),r("div",{staticClass:"dizhi"},[r("b",[e._v("详细地址:")]),e._v(e._s(e.dragData.address)+"\n                        ")]),e._v(" "),r("el-input",{attrs:{type:"hidden",rules:[{required:!0,message:"景区名称不能为空"}]},model:{value:e.form.lng,callback:function(t){e.form.lng=t},expression:"form.lng"}}),e._v(" "),r("el-input",{attrs:{type:"hidden"},model:{value:e.form.lat,callback:function(t){e.form.lat=t},expression:"form.lat"}})],1)]),e._v(" "),r("div",{staticClass:"m-part"},[r("mapDrag",{staticClass:"mapbox",on:{drag:e.dragMap}})],1)]),e._v(" "),r("el-form-item",{attrs:{label:"景区分类",prop:"type",rules:[{required:!0,message:"景区分类不能为空"}]}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:e.handleChange1},model:{value:e.form.type,callback:function(t){e.form.type=t},expression:"form.type"}},e._l(e.viewType,function(e){return r("el-option",{key:e.id,attrs:{label:e.id,value:e}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"景区等级",prop:"level",rules:[{required:!0,message:"景区等级不能为空"}]}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:e.handleChange2},model:{value:e.form.level,callback:function(t){e.form.level=t},expression:"form.level"}},e._l(e.viewLevel,function(e){return r("el-option",{key:e.id,attrs:{label:e.id,value:e}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"景区简介",prop:"remark",rules:[{required:!0,message:"景区简介不能为空"}]}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.remark,callback:function(t){e.form.remark=t},expression:"form.remark"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"地址",prop:"address",rules:[{required:!0,message:"地址不能为空"}]}},[r("el-input",{model:{value:e.form.address,callback:function(t){e.form.address=t},expression:"form.address"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"营业时间",prop:"businessTime",rules:[{required:!0,message:"营业时间不能为空"}]}},[r("el-input",{attrs:{placeholder:"请输入起止时间,格式为 (8:00-17:00)"},model:{value:e.form.businessTime,callback:function(t){e.form.businessTime=t},expression:"form.businessTime"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"电话",prop:"phone",rules:[{required:!0,message:"电话不能为空"}]}},[r("el-input",{attrs:{type:"number"},model:{value:e.form.phone,callback:function(t){e.form.phone=t},expression:"form.phone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"温馨提示",prop:"reminder",rules:[{required:!0,message:"温馨提示不能为空"}]}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.reminder,callback:function(t){e.form.reminder=t},expression:"form.reminder"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"优惠政策",prop:"discount",rules:[{required:!0,message:"优惠政策不能为空"}]}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.discount,callback:function(t){e.form.discount=t},expression:"form.discount"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"公交线路",prop:"busMessage",rules:[{required:!0,message:"公交线路不能为空"}]}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.busMessage,callback:function(t){e.form.busMessage=t},expression:"form.busMessage"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"自驾线路",prop:"selfRoute",rules:[{required:!0,message:"自驾线路不能为空"}]}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.selfRoute,callback:function(t){e.form.selfRoute=t},expression:"form.selfRoute"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"上传照片",prop:"file"}},[r("el-upload",{staticClass:"upload-demo",attrs:{multiple:"true","list-type":"picture-card",action:"http://192.168.1.109:8080/TicketSales/view/add.action","on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-success":e.successUrl,"file-list":e.fileList2,name:"file"}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v("  "),r("span",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"业务人员",prop:"staff",rules:[{required:!0,message:"业务人员不能为空"}]}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:e.handleChange3},model:{value:e.form.staff,callback:function(t){e.form.staff=t},expression:"form.staff"}},e._l(e.staff,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"所属省份",prop:"province",rules:[{required:!0,message:"所属省份不能为空"}]}},[r("el-select",{attrs:{placeholder:"请选择所属省份"},on:{change:e.handleChange4},model:{value:e.form.province,callback:function(t){e.form.province=t},expression:"form.province"}},e._l(e.province,function(e){return r("el-option",{key:e.id,attrs:{label:e.id,value:e}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"所属城市",prop:"city",rules:[{required:!0,message:"所属城市不能为空"}]}},[r("el-select",{attrs:{placeholder:"请选择所属城市"},on:{change:e.handleChange5},model:{value:e.form.city,callback:function(t){e.form.city=t},expression:"form.city"}},e._l(e.city,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"景区排序",prop:"sort",rules:[{required:!0,message:"景区排序不能为空"},{type:"number",min:0,message:"景区排序必须为不小于0数字值"}]}},[r("el-input",{attrs:{placeholder:"优先级为0,1,2,3...的数字值,数值越小级别越高"},model:{value:e.form.sort,callback:function(t){e.form.sort=e._n(t)},expression:"form.sort"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"",prop:"viewId"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit("form")}}},[e._v("提 交")]),e._v(" "),r("el-button",{on:{click:function(t){e.resetForm("form")}}},[e._v("重 置")])],1)],1)],1)])},staticRenderFns:[]}},1048:function(e,t,r){var i=r(699);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);r(195)("e7fddef4",i,!0)},518:function(e,t,r){r(1048);var i=r(196)(r(600),r(1016),"data-v-1b7ce186",null);e.exports=i.exports},524:function(e,t,r){"use strict";t.a={apidomain:"http://192.168.1.109:8080/TicketSales"}},526:function(e,t,r){"use strict";function i(e){var t,r;this.promise=new e(function(e,i){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=i}),this.resolve=a(t),this.reject=a(r)}var a=r(198);e.exports.f=function(e){return new i(e)}},528:function(e,t,r){e.exports={default:r(537),__esModule:!0}},529:function(e,t,r){var i=r(135),a=r(49)("toStringTag"),n="Arguments"==i(function(){return arguments}()),o=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=o(t=Object(e),a))?r:n?i(t):"Object"==(s=i(t))&&"function"==typeof t.callee?"Arguments":s}},530:function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},531:function(e,t,r){var i=r(64),a=r(65),n=r(526);e.exports=function(e,t){if(i(e),a(t)&&t.constructor===e)return t;var r=n.f(e);return(0,r.resolve)(t),r.promise}},532:function(e,t,r){var i=r(64),a=r(198),n=r(49)("species");e.exports=function(e,t){var r,o=i(e).constructor;return void 0===o||void 0==(r=i(o)[n])?t:a(r)}},533:function(e,t,r){var i,a,n,o=r(199),s=r(540),l=r(200),c=r(136),u=r(33),d=u.process,f=u.setImmediate,p=u.clearImmediate,m=u.MessageChannel,h=u.Dispatch,v=0,g={},b=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},x=function(e){b.call(e.data)};f&&p||(f=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return g[++v]=function(){s("function"==typeof e?e:Function(e),t)},i(v),v},p=function(e){delete g[e]},"process"==r(135)(d)?i=function(e){d.nextTick(o(b,e,1))}:h&&h.now?i=function(e){h.now(o(b,e,1))}:m?(a=new m,n=a.port2,a.port1.onmessage=x,i=o(n.postMessage,n,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(i=function(e){u.postMessage(e+"","*")},u.addEventListener("message",x,!1)):i="onreadystatechange"in c("script")?function(e){l.appendChild(c("script")).onreadystatechange=function(){l.removeChild(this),b.call(e)}}:function(e){setTimeout(o(b,e,1),0)}),e.exports={set:f,clear:p}},534:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(528),a=r.n(i),n=r(536),o=r(535);t.default={props:["lat","lng"],data:function(){return{searchKey:"",placeSearch:null,dragStatus:!1,AMapUI:null,AMap:null}},watch:{searchKey:function(){""===this.searchKey&&this.placeSearch.clear()}},methods:{handleSearch:function(){this.searchKey&&this.placeSearch.search(this.searchKey)},initMap:function(){var e=this,t=this.AMapUI=window.AMapUI,r=this.AMap=window.AMap;t.loadUI(["misc/PositionPicker"],function(t){var i={zoom:16,cityName:o.a};e.lat&&e.lng&&(i.center=[e.lng,e.lat]);var a=new r.Map("js-container",i);r.service("AMap.PlaceSearch",function(){e.placeSearch=new r.PlaceSearch({pageSize:5,pageIndex:1,citylimit:!0,city:o.a,map:a,panel:"js-result"})}),r.plugin(["AMap.ToolBar"],function(){a.addControl(new r.ToolBar({position:"RB"}))});var n=new t({mode:"dragMap",map:a});n.on("success",function(t){e.dragStatus?e.$emit("drag",t):e.dragStatus=!0}),n.start()})}},created:function(){var e=this;window.AMap&&window.AMapUI?this.initMap():a.a.all([r.i(n.a)("http://webapi.amap.com/maps?v=1.3&key="+o.b),r.i(n.a)("http://webapi.amap.com/ui/1.0/main.js")]).then(function(){e.initMap()})}}},535:function(e,t,r){"use strict";r.d(t,"b",function(){return i}),r.d(t,"a",function(){return a});var i="cfd8da5cf010c5f7441834ff5e764f5b",a="西安"},536:function(e,t,r){"use strict";function i(e,t){function r(e){document.body.removeChild(e)}return function(e){var i=document.createElement("script");document.body.appendChild(i);var a=new n.a(function(e,a){i.addEventListener("load",function(a){r(i),t||e(a)},!1),i.addEventListener("error",function(e){r(i),a(e)},!1),t&&(window.____callback____=function(){e(),window.____callback____=null})});return t&&(e+="&callback=____callback____"),i.src=e,a}(e)}t.a=i;var a=r(528),n=r.n(a)},537:function(e,t,r){r(202),r(203),r(204),r(548),r(549),r(550),e.exports=r(63).Promise},538:function(e,t){e.exports=function(e,t,r,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(r+": incorrect invocation!");return e}},539:function(e,t,r){var i=r(199),a=r(542),n=r(541),o=r(64),s=r(201),l=r(547),c={},u={},t=e.exports=function(e,t,r,d,f){var p,m,h,v,g=f?function(){return e}:l(e),b=i(r,d,t?2:1),x=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(n(g)){for(p=s(e.length);p>x;x++)if((v=t?b(o(m=e[x])[0],m[1]):b(e[x]))===c||v===u)return v}else for(h=g.call(e);!(m=h.next()).done;)if((v=a(h,b,m.value,t))===c||v===u)return v};t.BREAK=c,t.RETURN=u},540:function(e,t){e.exports=function(e,t,r){var i=void 0===r;switch(t.length){case 0:return i?e():e.call(r);case 1:return i?e(t[0]):e.call(r,t[0]);case 2:return i?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},541:function(e,t,r){var i=r(88),a=r(49)("iterator"),n=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||n[a]===e)}},542:function(e,t,r){var i=r(64);e.exports=function(e,t,r,a){try{return a?t(i(r)[0],r[1]):t(r)}catch(t){var n=e.return;throw void 0!==n&&i(n.call(e)),t}}},543:function(e,t,r){var i=r(49)("iterator"),a=!1;try{var n=[7][i]();n.return=function(){a=!0},Array.from(n,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!a)return!1;var r=!1;try{var n=[7],o=n[i]();o.next=function(){return{done:r=!0}},n[i]=function(){return o},e(n)}catch(e){}return r}},544:function(e,t,r){var i=r(33),a=r(533).set,n=i.MutationObserver||i.WebKitMutationObserver,o=i.process,s=i.Promise,l="process"==r(135)(o);e.exports=function(){var e,t,r,c=function(){var i,a;for(l&&(i=o.domain)&&i.exit();e;){a=e.fn,e=e.next;try{a()}catch(i){throw e?r():t=void 0,i}}t=void 0,i&&i.enter()};if(l)r=function(){o.nextTick(c)};else if(n){var u=!0,d=document.createTextNode("");new n(c).observe(d,{characterData:!0}),r=function(){d.data=u=!u}}else if(s&&s.resolve){var f=s.resolve();r=function(){f.then(c)}}else r=function(){a.call(i,c)};return function(i){var a={fn:i,next:void 0};t&&(t.next=a),e||(e=a,r()),t=a}}},545:function(e,t,r){var i=r(51);e.exports=function(e,t,r){for(var a in t)r&&e[a]?e[a]=t[a]:i(e,a,t[a]);return e}},546:function(e,t,r){"use strict";var i=r(33),a=r(63),n=r(52),o=r(50),s=r(49)("species");e.exports=function(e){var t="function"==typeof a[e]?a[e]:i[e];o&&t&&!t[s]&&n.f(t,s,{configurable:!0,get:function(){return this}})}},547:function(e,t,r){var i=r(529),a=r(49)("iterator"),n=r(88);e.exports=r(63).getIteratorMethod=function(e){if(void 0!=e)return e[a]||e["@@iterator"]||n[i(e)]}},548:function(e,t,r){"use strict";var i,a,n,o,s=r(89),l=r(33),c=r(199),u=r(529),d=r(87),f=r(65),p=r(198),m=r(538),h=r(539),v=r(532),g=r(533).set,b=r(544)(),x=r(526),_=r(530),w=r(531),y=l.TypeError,k=l.process,C=l.Promise,P="process"==u(k),M=function(){},S=a=x.f,T=!!function(){try{var e=C.resolve(1),t=(e.constructor={})[r(49)("species")]=function(e){e(M,M)};return(P||"function"==typeof PromiseRejectionEvent)&&e.then(M)instanceof t}catch(e){}}(),I=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},L=function(e,t){if(!e._n){e._n=!0;var r=e._c;b(function(){for(var i=e._v,a=1==e._s,n=0;r.length>n;)!function(t){var r,n,o=a?t.ok:t.fail,s=t.resolve,l=t.reject,c=t.domain;try{o?(a||(2==e._h&&z(e),e._h=1),!0===o?r=i:(c&&c.enter(),r=o(i),c&&c.exit()),r===t.promise?l(y("Promise-chain cycle")):(n=I(r))?n.call(r,s,l):s(r)):l(i)}catch(e){l(e)}}(r[n++]);e._c=[],e._n=!1,t&&!e._h&&D(e)})}},D=function(e){g.call(l,function(){var t,r,i,a=e._v,n=j(e);if(n&&(t=_(function(){P?k.emit("unhandledRejection",a,e):(r=l.onunhandledrejection)?r({promise:e,reason:a}):(i=l.console)&&i.error&&i.error("Unhandled promise rejection",a)}),e._h=P||j(e)?2:1),e._a=void 0,n&&t.e)throw t.v})},j=function(e){if(1==e._h)return!1;for(var t,r=e._a||e._c,i=0;r.length>i;)if(t=r[i++],t.fail||!j(t.promise))return!1;return!0},z=function(e){g.call(l,function(){var t;P?k.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},R=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),L(t,!0))},F=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw y("Promise can't be resolved itself");(t=I(e))?b(function(){var i={_w:r,_d:!1};try{t.call(e,c(F,i,1),c(R,i,1))}catch(e){R.call(i,e)}}):(r._v=e,r._s=1,L(r,!1))}catch(e){R.call({_w:r,_d:!1},e)}}};T||(C=function(e){m(this,C,"Promise","_h"),p(e),i.call(this);try{e(c(F,this,1),c(R,this,1))}catch(e){R.call(this,e)}},i=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=r(545)(C.prototype,{then:function(e,t){var r=S(v(this,C));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=P?k.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&L(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),n=function(){var e=new i;this.promise=e,this.resolve=c(F,e,1),this.reject=c(R,e,1)},x.f=S=function(e){return e===C||e===o?new n(e):a(e)}),d(d.G+d.W+d.F*!T,{Promise:C}),r(90)(C,"Promise"),r(546)("Promise"),o=r(63).Promise,d(d.S+d.F*!T,"Promise",{reject:function(e){var t=S(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(s||!T),"Promise",{resolve:function(e){return w(s&&this===o?C:this,e)}}),d(d.S+d.F*!(T&&r(543)(function(e){C.all(e).catch(M)})),"Promise",{all:function(e){var t=this,r=S(t),i=r.resolve,a=r.reject,n=_(function(){var r=[],n=0,o=1;h(e,!1,function(e){var s=n++,l=!1;r.push(void 0),o++,t.resolve(e).then(function(e){l||(l=!0,r[s]=e,--o||i(r))},a)}),--o||i(r)});return n.e&&a(n.v),r.promise},race:function(e){var t=this,r=S(t),i=r.reject,a=_(function(){h(e,!1,function(e){t.resolve(e).then(r.resolve,i)})});return a.e&&i(a.v),r.promise}})},549:function(e,t,r){"use strict";var i=r(87),a=r(63),n=r(33),o=r(532),s=r(531);i(i.P+i.R,"Promise",{finally:function(e){var t=o(this,a.Promise||n.Promise),r="function"==typeof e;return this.then(r?function(r){return s(t,e()).then(function(){return r})}:e,r?function(r){return s(t,e()).then(function(){throw r})}:e)}})},550:function(e,t,r){"use strict";var i=r(87),a=r(526),n=r(530);i(i.S,"Promise",{try:function(e){var t=a.f(this),r=n(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},551:function(e,t,r){t=e.exports=r(86)(void 0),t.push([e.i,".m-map{min-width:500px;min-height:300px;position:relative}.m-map .map{width:100%;height:100%}.m-map .search{position:absolute;top:10px;left:10px;width:285px;z-index:1}.m-map .search input{width:180px;border:1px solid #ccc;line-height:20px;padding:5px;outline:none}.m-map .search button{line-height:26px;background:#fff;border:1px solid #ccc;width:50px;text-align:center}.m-map .result{max-height:300px;overflow:auto;margin-top:10px}",""])},552:function(e,t,r){r(554);var i=r(196)(r(534),r(553),null,null);e.exports=i.exports},553:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"m-map"},[e.placeSearch?r("div",{staticClass:"search"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchKey,expression:"searchKey"}],attrs:{type:"search",placeholder:"请输入景区名称"},domProps:{value:e.searchKey},on:{input:function(t){t.target.composing||(e.searchKey=t.target.value)}}}),e._v(" "),r("button",{attrs:{type:"button"},on:{click:e.handleSearch}},[e._v("搜索")]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.searchKey,expression:"searchKey"}],staticClass:"result",attrs:{id:"js-result"}})]):e._e(),e._v(" "),r("div",{staticClass:"map",attrs:{id:"js-container"}})])},staticRenderFns:[]}},554:function(e,t,r){var i=r(551);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);r(195)("580f123c",i,!0)},555:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(556);t.default={props:{placeholder:{default:"+",type:String},onChange:{type:Function},maxSize:{default:3072,type:Number}},data:function(){return{inputId:"",largerDataList:[],imageDataList:[],fileNameList:[],errorText:"",countText:"",isShowLarger:!1,previewIndex:0}},computed:{sizeFormatted:function(){return this.maxSize<1024?this.maxSize+"K":(this.maxSize/1024).toFixed(this.maxSize%1024>0?2:0)+"M"}},methods:{handleFileChange:function(){var e=this.$refs.input,t=e.files;this.handleFile(t)},handleDrop:function(e){var t=e.dataTransfer.files;this.handleFile(t)},preventDefaultEvent:function(e){document.addEventListener(e,function(e){e.preventDefault()},!1)},deleteImg:function(e){this.imageDataList.splice(e,1),this.largerDataList.splice(e,1),this.countText=this.imageDataList.length+"张图片"},handleFile:function(e){for(var t=0;t<e.length;t++){var r=e[t];if(Math.floor(r.size/1024)>this.maxSize)return this.errorText="文件大小不能超过"+this.sizeFormatted,!1;this.fileNameList.push(r.name)}e&&e.length>0&&(this.countText=e.length+"张图片"),this.$emit("onChange",e),this.preview(e)},preview:function(e){var t=this;if(e&&window.FileReader)for(var a=0;a<e.length;a++){var n=e[a],o=new FileReader;o.readAsDataURL(n),o.onload=function(e){t.largerDataList.push(e.target.result),r.i(i.a)(e.target.result,110,110,function(e){t.imageDataList.push(e)})}}},showLargerPreview:function(e){this.isShowLarger=!0,this.previewIndex=e},closePreview:function(){this.isShowLarger=!1}},mounted:function(){var e=this;this.inputId=this.id||(new Date).getTime(),["drop","dragenter","dragover","dragleave"].forEach(function(t){e.preventDefaultEvent(t)});var t=document.body.clientWidth;this.$refs.largerPreview.style.left=(t-800)/2+"px"}}},556:function(e,t,r){"use strict";function i(e,t,r,i){var a=new Image;a.onload=function(e){console.info("resizeImage width:"+a.width),console.info("resizeImage height:"+a.height);var n=document.createElement("canvas");if(n.width=t,n.height=r,a.width===a.height)n.getContext("2d").drawImage(a,0,0,t,r);else{var o=Math.min(a.width,a.height);a.width>a.height?n.getContext("2d").drawImage(a,(a.width-o)/2,0,o,o,0,0,t,r):n.getContext("2d").drawImage(a,0,(a.height-o)/2,o,o,0,0,t,r)}i(n.toDataURL())},a.src=e}t.a=i},560:function(e,t,r){t=e.exports=r(86)(void 0),t.push([e.i,"svg[data-v-070ca9b7]{fill:#fff}.img-uploader[data-v-070ca9b7]{position:relative;width:100%;min-height:300px;border-radius:5px;background:#ebebeb;box-sizing:border-box;padding:20px}.img-uploader-placeholder[data-v-070ca9b7]{position:relative;margin:0;font-size:20px;width:110px;height:110px;box-sizing:border-box;padding:45px 0;color:#aaa;text-align:center;border-radius:4px;border:1px solid #c3c3c3;background-color:#fff}.img-uploader-preview-list[data-v-070ca9b7]{display:block;width:100%;height:100%;white-space:nowrap;overflow:hidden;text-align:center}.img-uploader-preview[data-v-070ca9b7]{position:relative;float:left;display:inline-block;z-index:2;height:110px;width:110px;margin-right:10px;margin-bottom:10px;border-radius:10px;overflow:hidden;background:#333}.img-uploader-preview .preview-img[data-v-070ca9b7]{width:100%;height:100%;overflow:hidden}.img-uploader-label[data-v-070ca9b7]{position:absolute;width:100%;height:100%;top:0;left:0;bottom:0;right:0;cursor:pointer;margin-bottom:0}.img-uploader-mask[data-v-070ca9b7]{display:block;position:absolute;bottom:0;width:100%;border-radius:1px;text-align:center;background:rgba(0,0,0,.6)}.img-uploader-delete-btn[data-v-070ca9b7]{display:block;position:absolute;top:0;right:0;margin:5px;width:20px;height:20px;color:red;border:2px solid red;font-size:16px;line-height:20px;border-radius:100%;cursor:pointer}.img-uploader-file-name[data-v-070ca9b7]{color:#fff;font-size:5px;padding-top:10px;margin:0;display:inline-block;max-width:90%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;cursor:pointer}.img-uploader-error[data-v-070ca9b7]{color:#e55;font-size:12px;position:absolute;bottom:-28px;width:100%}.img-uploader-count[data-v-070ca9b7]{color:#573e51;font-size:12px;position:absolute;bottom:-28px;width:100%}.largerPreview[data-v-070ca9b7]{position:fixed;top:100px;left:0;border-radius:10px;width:800px;height:auto;overflow:hidden;z-index:10}.largerPreview .preview-close-btn[data-v-070ca9b7]{position:absolute;top:5px;right:5px;width:20px;height:20px;color:red;border:2px solid red;font-size:16px;line-height:20px;border-radius:100%;cursor:pointer;text-align:center}.largerPreview img[data-v-070ca9b7]{width:100%;height:auto}",""])},564:function(e,t,r){r(566);var i=r(196)(r(555),r(565),"data-v-070ca9b7",null);e.exports=i.exports},565:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"uploader",staticClass:"img-uploader",on:{drop:e.handleDrop}},[r("div",{staticClass:"img-uploader-preview-list"},[e._l(e.imageDataList,function(t,i){return r("div",{staticClass:"img-uploader-preview"},[r("div",{staticClass:"preview-img",on:{click:function(t){e.showLargerPreview(i)}}},[r("img",{attrs:{src:t}})]),e._v(" "),r("div",{staticClass:"img-uploader-mask"},[r("p",{staticClass:"img-uploader-file-name"},[e._v(e._s(e.fileNameList[i]))])]),e._v(" "),r("div",{staticClass:"img-uploader-delete-btn",on:{click:function(t){e.deleteImg(i)}}},[e._v("x")])])}),e._v(" "),r("div",{staticClass:"img-uploader-preview"},[r("p",{staticClass:"img-uploader-placeholder"},[e._v("\n        "+e._s(e.placeholder)+"\n        "),r("label",{staticClass:"img-uploader-label",attrs:{for:e.inputId}}),e._v(" "),r("input",{ref:"input",staticStyle:{display:"none"},attrs:{id:e.inputId,type:"file",accept:"image/gif,image/jpeg,image/jpg,image/png",multiple:"multiple"},on:{change:e.handleFileChange}})])])],2),e._v(" "),e.errorText.length?r("div",{staticClass:"img-uploader-error"},[e._v(e._s(e.errorText))]):e._e(),e._v(" "),e.countText.length?r("div",{staticClass:"img-uploader-count"},[e._v(e._s(e.countText))]):e._e(),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowLarger,expression:"isShowLarger"}],ref:"largerPreview",staticClass:"largerPreview"},[r("img",{attrs:{src:e.largerDataList[e.previewIndex],alt:""}}),e._v(" "),r("div",{staticClass:"preview-close-btn",on:{click:e.closePreview}},[e._v("x")])])])},staticRenderFns:[]}},566:function(e,t,r){var i=r(560);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);r(195)("5e4c51b1",i,!0)},600:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(197),a=r.n(i),n=r(524),o=r(552),s=r.n(o),l=r(564),c=r.n(l);t.default={components:{mapDrag:s.a,ImageUploader:c.a},data:function(){return{fileList2:[{name:"food.jpeg",url:"http://imgsrc.baidu.com/imgad/pic/item/3801213fb80e7beca9004ec5252eb9389b506b38.jpg"}],currentPage:1,dragData:{lng:null,lat:null,address:null},form:{lng:"",lat:"",name:"",type:"",level:"",remark:"",address:"",businessTime:"",phone:"",reminder:"",discount:"",busMessage:"",selfRoute:"",file:"",staff:"",staffId:"",staffName:"",province:"",city:"",sort:""},viewType:[],viewLevel:[],staff:[],province:[],city:[],maxSize:307200,files:[]}},created:function(){this.getAddress()},methods:{dragMap:function(e){this.dragData={lng:e.position.lng,lat:e.position.lat,address:e.address}},imgChange:function(e){e&&(console.log(e),console.log(e[0].name),this.form.file=e)},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e),console.log(e.name),console.log(e.url)},successUrl:function(e,t,r){console.log(t),console.log(t.name),console.log(t.url),this.files=t},resetForm:function(e){this.$refs[e].resetFields()},getAddress:function(){var e=this;a.a.get(n.a.apidomain+"/view/addUI.action").then(function(t){e.viewType=t.data.data.viewType,e.viewLevel=t.data.data.viewLevel,e.staff=t.data.data.staff,e.province=t.data.data.viewProvince,e.city=t.data.data.viewCity})},handleChange1:function(e){this.form.type=e},handleChange2:function(e){this.form.level=e},handleChange3:function(e){this.form.staffId=e.id,this.form.staffName=e.name},handleChange4:function(e){this.form.province=e},handleChange5:function(e){this.form.city=e},onSubmit:function(e){var t=this;console.log(1111),console.log(this.files),console.log(this.files.name),console.log(this.files.url),this.$refs[e].validate(function(e){if(!e)return t.$message({message:"参数错误,请检查后重新输入~~",type:"warning"}),!1;a.a.post(n.a.apidomain+"/view/add.action?name="+t.form.name+"&type="+t.form.type+"&level="+t.form.level+"&remark="+t.form.remark+"&address="+t.form.address+"&businessTime="+t.form.businessTime+"&phone="+t.form.phone+"&reminder="+t.form.reminder+"&discount="+t.form.discount+"&busMessage="+t.form.busMessage+"&selfRoute="+t.form.selfRoute+"&file="+t.form.file+"&staffId="+t.form.staff.id+"&staffName="+t.form.staff.name+"&province="+t.form.province+"&city="+t.form.city+"&sort="+t.form.sort+"&lng="+t.dragData.lng+"&lat="+t.dragData.lat).then(function(e){if(t.currentPage=e.data.data.currPage,t.codesID=e.data.code,0===t.codesID)return t.$message({message:"参数错误,请重试~",type:"warning"}),void t.getimgs();t.$message({message:"添加成功!,请点击最后一页查看新增数据~~",type:"success"}),t.$router.push({path:"./SceneryManage",params:{currentPage:t.currentPage}})})})}}}},699:function(e,t,r){t=e.exports=r(86)(void 0),t.push([e.i,".form-box[data-v-1b7ce186]{width:50%}.map[data-v-1b7ce186]{width:100%;height:60px;border:1px solid #ccc}.dizhi[data-v-1b7ce186]{line-height:100%}.m-part .mapbox[data-v-1b7ce186]{border:1px solid #ccc;width:100%;height:300px;margin-bottom:10px;float:left}",""])}});